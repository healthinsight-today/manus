{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{useReports}from'../context/ReportsContext';import PageContainer from'../components/layout/PageContainer';import InsightDetail from'../components/insights/InsightDetail';import Button from'../components/common/Button';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const InsightDetailPage=()=>{const{insightId}=useParams();const{insights,reports,recommendations,isLoading,error}=useReports();const[insight,setInsight]=useState(null);const[report,setReport]=useState(null);const[relatedInsights,setRelatedInsights]=useState([]);const[relatedRecommendations,setRelatedRecommendations]=useState([]);const navigate=useNavigate();// Fetch insight data\nuseEffect(()=>{if(insightId&&insights.length>0){const currentInsight=insights.find(i=>i.id===insightId);if(currentInsight){setInsight(currentInsight);// Find the report this insight belongs to\nif(currentInsight.report_id){const insightReport=reports.find(r=>r.id===currentInsight.report_id);if(insightReport){setReport(insightReport);}}// Find related insights (same category or related parameters)\nconst related=insights.filter(i=>i.id!==insightId&&(i.category===currentInsight.category||i.related_parameters&&currentInsight.related_parameters&&i.related_parameters.some(param=>{var _currentInsight$relat;return(_currentInsight$relat=currentInsight.related_parameters)===null||_currentInsight$relat===void 0?void 0:_currentInsight$relat.includes(param);})));setRelatedInsights(related.slice(0,3));// Limit to 3 related insights\n// Find related recommendations\nif(currentInsight.related_parameters&&recommendations.length>0){const relatedRecs=recommendations.filter(rec=>rec.related_parameters&&rec.related_parameters.some(param=>{var _currentInsight$relat2;return(_currentInsight$relat2=currentInsight.related_parameters)===null||_currentInsight$relat2===void 0?void 0:_currentInsight$relat2.includes(param);}));setRelatedRecommendations(relatedRecs);}}}},[insightId,insights,reports,recommendations]);// Handle back to insights\nconst handleBackToInsights=()=>{navigate('/insights');};// Handle view report\nconst handleViewReport=()=>{if(report){navigate(`/reports/${report.id}`);}};// Handle view related insight\nconst handleViewRelatedInsight=relatedInsightId=>{navigate(`/insights/${relatedInsightId}`);};return/*#__PURE__*/_jsx(PageContainer,{title:insight?insight.title:'Insight Details',description:insight?`${insight.category} • ${insight.severity} Severity`:'Loading insight details...',isLoading:isLoading,error:error,actions:/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:handleBackToInsights,leftIcon:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M10 19l-7-7m0 0l7-7m-7 7h18\"})}),children:\"Back to Insights\"}),children:insight?/*#__PURE__*/_jsx(InsightDetail,{insight:insight,report:report,relatedInsights:relatedInsights,recommendations:relatedRecommendations,onViewReport:handleViewReport,onViewRelatedInsight:handleViewRelatedInsight}):!isLoading&&!error?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-16 h-16 text-neutral-400 mx-auto mb-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-neutral-800 dark:text-white mb-2\",children:\"Insight Not Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-neutral-600 dark:text-neutral-400 mb-6\",children:\"The insight you're looking for doesn't exist or has been removed.\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleBackToInsights,children:\"Go to Insights\"})]}):null});};export default InsightDetailPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useReports","PageContainer","InsightDetail","Button","jsx","_jsx","jsxs","_jsxs","InsightDetailPage","insightId","insights","reports","recommendations","isLoading","error","insight","setInsight","report","setReport","relatedInsights","setRelatedInsights","relatedRecommendations","setRelatedRecommendations","navigate","length","currentInsight","find","i","id","report_id","insightReport","r","related","filter","category","related_parameters","some","param","_currentInsight$relat","includes","slice","relatedRecs","rec","_currentInsight$relat2","handleBackToInsights","handleViewReport","handleViewRelatedInsight","relatedInsightId","title","description","severity","actions","variant","onClick","leftIcon","className","fill","stroke","viewBox","xmlns","children","strokeLinecap","strokeLinejoin","strokeWidth","d","onViewReport","onViewRelatedInsight"],"sources":["/home/ubuntu/healthinsighttoday-frontend/src/pages/InsightDetailPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useReports } from '../context/ReportsContext';\nimport PageContainer from '../components/layout/PageContainer';\nimport InsightDetail from '../components/insights/InsightDetail';\nimport Button from '../components/common/Button';\nimport { Insight, Report, Recommendation } from '../types/Report';\n\nconst InsightDetailPage: React.FC = () => {\n  const { insightId } = useParams<{ insightId: string }>();\n  const { insights, reports, recommendations, isLoading, error } = useReports();\n  const [insight, setInsight] = useState<Insight | null>(null);\n  const [report, setReport] = useState<Report | null>(null);\n  const [relatedInsights, setRelatedInsights] = useState<Insight[]>([]);\n  const [relatedRecommendations, setRelatedRecommendations] = useState<Recommendation[]>([]);\n  const navigate = useNavigate();\n\n  // Fetch insight data\n  useEffect(() => {\n    if (insightId && insights.length > 0) {\n      const currentInsight = insights.find(i => i.id === insightId);\n      if (currentInsight) {\n        setInsight(currentInsight);\n        \n        // Find the report this insight belongs to\n        if (currentInsight.report_id) {\n          const insightReport = reports.find(r => r.id === currentInsight.report_id);\n          if (insightReport) {\n            setReport(insightReport);\n          }\n        }\n        \n        // Find related insights (same category or related parameters)\n        const related = insights.filter(i => \n          i.id !== insightId && (\n            i.category === currentInsight.category ||\n            (i.related_parameters && currentInsight.related_parameters && \n             i.related_parameters.some(param => currentInsight.related_parameters?.includes(param)))\n          )\n        );\n        setRelatedInsights(related.slice(0, 3)); // Limit to 3 related insights\n        \n        // Find related recommendations\n        if (currentInsight.related_parameters && recommendations.length > 0) {\n          const relatedRecs = recommendations.filter(rec => \n            rec.related_parameters && \n            rec.related_parameters.some(param => currentInsight.related_parameters?.includes(param))\n          );\n          setRelatedRecommendations(relatedRecs);\n        }\n      }\n    }\n  }, [insightId, insights, reports, recommendations]);\n\n  // Handle back to insights\n  const handleBackToInsights = () => {\n    navigate('/insights');\n  };\n\n  // Handle view report\n  const handleViewReport = () => {\n    if (report) {\n      navigate(`/reports/${report.id}`);\n    }\n  };\n\n  // Handle view related insight\n  const handleViewRelatedInsight = (relatedInsightId: string) => {\n    navigate(`/insights/${relatedInsightId}`);\n  };\n\n  return (\n    <PageContainer\n      title={insight ? insight.title : 'Insight Details'}\n      description={insight ? `${insight.category} • ${insight.severity} Severity` : 'Loading insight details...'}\n      isLoading={isLoading}\n      error={error}\n      actions={\n        <Button\n          variant=\"outline\"\n          onClick={handleBackToInsights}\n          leftIcon={\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"></path>\n            </svg>\n          }\n        >\n          Back to Insights\n        </Button>\n      }\n    >\n      {insight ? (\n        <InsightDetail\n          insight={insight}\n          report={report}\n          relatedInsights={relatedInsights}\n          recommendations={relatedRecommendations}\n          onViewReport={handleViewReport}\n          onViewRelatedInsight={handleViewRelatedInsight}\n        />\n      ) : !isLoading && !error ? (\n        <div className=\"text-center py-12\">\n          <svg className=\"w-16 h-16 text-neutral-400 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n          </svg>\n          <h3 className=\"text-xl font-semibold text-neutral-800 dark:text-white mb-2\">Insight Not Found</h3>\n          <p className=\"text-neutral-600 dark:text-neutral-400 mb-6\">\n            The insight you're looking for doesn't exist or has been removed.\n          </p>\n          <Button\n            variant=\"primary\"\n            onClick={handleBackToInsights}\n          >\n            Go to Insights\n          </Button>\n        </div>\n      ) : null}\n    </PageContainer>\n  );\n};\n\nexport default InsightDetailPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}